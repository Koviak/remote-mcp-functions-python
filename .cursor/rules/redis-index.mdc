---
description: "MASTER INDEX: Redis Documentation Navigator - Start here to find the right Redis documentation file for your task. Clear hierarchy and navigation guide for all Redis-related rules."
alwaysApply: false
---
# Redis Documentation Master Index

## ğŸ¯ PURPOSE
This is your **STARTING POINT** for all Redis-related documentation in Annika 2.0. Use this index to quickly find the right documentation file for your task.

---

## ğŸ“Š QUICK DECISION TREE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ START: What do you need to do with Redis?                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Writing Code?    â”‚                     â”‚ Debugging/Manual?    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                           â”‚
        â–¼                                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1ï¸âƒ£ redis-master-manager.mdc     â”‚     â”‚ redis-cli.mdc          â”‚
â”‚    (HOW to connect)              â”‚     â”‚ (Manual CLI commands)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2ï¸âƒ£ redis-component-keys-map.mdc â”‚
â”‚    (WHAT keys exist)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼              â–¼               â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ JSON Ops?   â”‚ â”‚ Planner      â”‚ â”‚ System Two  â”‚ â”‚ Architecture â”‚
â”‚ redis-json  â”‚ â”‚ Sync?        â”‚ â”‚ Memory?     â”‚ â”‚ Overview?    â”‚
â”‚ .mdc        â”‚ â”‚ redis-tasks  â”‚ â”‚ redis-      â”‚ â”‚ module-redis â”‚
â”‚             â”‚ â”‚ -keys-..mdc  â”‚ â”‚ memory-..   â”‚ â”‚ -mgmt.mdc    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“š COMPLETE FILE HIERARCHY

### **TIER 1: FUNDAMENTALS** (Start Here)

#### 1. [redis-master-manager.mdc](mdc:.cursor/rules/redis-master-manager.mdc)
**READ THIS FIRST** - The SINGLE SOURCE OF TRUTH for Redis connections
- âœ… Required patterns for all Redis code
- âŒ Forbidden patterns (direct imports, hardcoded connections)
- Database strategy (DB 0, 1, 2)
- Connection patterns and error handling
- Multi-database optimization

**Use When:**
- Writing ANY Redis code
- Setting up Redis connections
- Troubleshooting connection issues
- Understanding database strategy

#### 2. [redis-component-keys-map.mdc](mdc:.cursor/rules/redis-component-keys-map.mdc)
**CANONICAL KEY REFERENCE** - Complete inventory of all Redis keys
- All key patterns (consciousness, tasks, agents, MCP)
- Data structures and schemas
- Pub/sub channel patterns
- Component-specific examples
- Authoritative storage rules

**Use When:**
- Finding the correct key for your data
- Understanding what data exists in Redis
- Working with pub/sub channels
- Verifying key patterns

---

### **TIER 2: OPERATIONS & ARCHITECTURE**

#### 3. [redis-json.mdc](mdc:.cursor/rules/redis-json.mdc)
**PROGRAMMATIC OPERATIONS** - RedisJSON usage guide
- JSON path syntax
- CRUD operations for JSON data
- Field-level updates
- OpenAI structured output integration
- Array and object operations

**Use When:**
- Working with JSON data in Redis
- Updating specific fields without full rewrites
- Integrating OpenAI structured outputs
- Implementing structured data storage

#### 4. [module-redis-management.mdc](mdc:.cursor/rules/module-redis-management.mdc)
**MODULE ARCHITECTURE** - System design and file inventory
- Complete file inventory
- Execution trace mapping
- Integration patterns
- Health check functions
- Configuration requirements

**Use When:**
- Understanding system architecture
- Finding implementation files
- Tracing execution flow
- Diagnosing performance issues

---

### **TIER 3: DOMAIN-SPECIFIC PATTERNS**

#### 5. [redis-tasks-keys-and-channels-microsoft-mcp.mdc](mdc:.cursor/rules/redis-tasks-keys-and-channels-microsoft-mcp.mdc)
**MS-MCP INTEGRATION** - Microsoft Planner sync patterns
- Planner â†” Annika task sync
- MS-MCP specific keys and schemas
- ID mapping patterns
- Webhook-driven sync
- Graph API integration

**Use When:**
- Working with Microsoft 365 integration
- Debugging Planner sync
- Implementing webhook handlers
- Understanding task ID mapping

#### 6. [redis-memory-sys-two.mdc](mdc:.cursor/rules/redis-memory-sys-two.mdc)
**SYSTEM TWO MEMORY** - Deep reasoning memory patterns
- Thought/belief/emotion storage
- Memory validation (20+ required fields)
- Vector similarity search
- Performance requirements (< 2s)
- 3072-dimension embeddings

**Use When:**
- Working with System Two memory
- Implementing thought storage
- Setting up vector search
- Debugging System Two operations

---

### **TIER 4: DEBUGGING & OPERATIONS**

#### 7. [redis-cli.mdc](mdc:.cursor/rules/redis-cli.mdc)
**MANUAL DEBUGGING** - WSL Docker CLI commands
- âš ï¸ **DEBUGGING ONLY** - Not for code
- Manual data inspection
- CLI command reference
- RedisJSON CLI operations
- Health checks and monitoring

**Use When:**
- Debugging data issues
- Manual data inspection
- Verifying key existence
- One-off data fixes
- Health checks

---

## ğŸ“ LEARNING PATH

### For New Developers:
1. **[redis-master-manager.mdc](mdc:.cursor/rules/redis-master-manager.mdc)** - Learn connection patterns
2. **[redis-component-keys-map.mdc](mdc:.cursor/rules/redis-component-keys-map.mdc)** - Understand key structure
3. **[redis-json.mdc](mdc:.cursor/rules/redis-json.mdc)** - Learn JSON operations
4. **[redis-cli.mdc](mdc:.cursor/rules/redis-cli.mdc)** - Practice with CLI debugging

### For Specific Tasks:

**Task: Create a new feature using Redis**
â†’ [redis-master-manager.mdc](mdc:.cursor/rules/redis-master-manager.mdc) â†’ [redis-component-keys-map.mdc](mdc:.cursor/rules/redis-component-keys-map.mdc) â†’ [redis-json.mdc](mdc:.cursor/rules/redis-json.mdc)

**Task: Debug Planner sync issue**
â†’ [redis-tasks-keys-and-channels-microsoft-mcp.mdc](mdc:.cursor/rules/redis-tasks-keys-and-channels-microsoft-mcp.mdc) â†’ [redis-cli.mdc](mdc:.cursor/rules/redis-cli.mdc)

**Task: Implement System Two memory**
â†’ [redis-memory-sys-two.mdc](mdc:.cursor/rules/redis-memory-sys-two.mdc) â†’ [redis-json.mdc](mdc:.cursor/rules/redis-json.mdc)

**Task: Understand system architecture**
â†’ [module-redis-management.mdc](mdc:.cursor/rules/module-redis-management.mdc) â†’ [redis-component-keys-map.mdc](mdc:.cursor/rules/redis-component-keys-map.mdc)

---

## âš¡ CRITICAL RULES (Quick Reference)

### Connection Rules (from redis-master-manager.mdc)
```python
# âœ… CORRECT
from Redis_Master_Manager_Client import get_async_redis_client
client = await get_async_redis_client()

# âŒ FORBIDDEN
import redis
client = redis.Redis(host="localhost", port=6379)
```

### Key Naming (from redis-component-keys-map.mdc)
```python
# All keys use annika: prefix in DB 0
annika:tasks:{task_id}                    # Authoritative task storage
annika:consciousness:{conv_id}:components:* # Consciousness components
annika:tasks:updates                      # Task notification channel
```

### Storage Type Enforcement (Repository Policy)
```text
All persisted application data MUST use RedisJSON. Do not store JSON as strings.
Exceptions: pub/sub payloads, ephemeral counters/locks, vendor-mandated keys documented in redis-component-keys-map.mdc.
```

### Database Strategy (from redis-master-manager.mdc)
```
DB 0: Application data (consciousness, tasks, mem0 vectors)
DB 1: Rate limiting
DB 2: Extended cache
```

---

## ğŸ” COMMON QUESTIONS

**Q: Which file do I read first?**
A: [redis-master-manager.mdc](mdc:.cursor/rules/redis-master-manager.mdc) - Always start with connection patterns

**Q: How do I find the right Redis key?**
A: [redis-component-keys-map.mdc](mdc:.cursor/rules/redis-component-keys-map.mdc) - Complete key reference

**Q: How do I debug Redis data?**
A: [redis-cli.mdc](mdc:.cursor/rules/redis-cli.mdc) - Manual CLI debugging guide

**Q: How do I work with JSON in Redis?**
A: [redis-json.mdc](mdc:.cursor/rules/redis-json.mdc) - RedisJSON operations

**Q: Where are specific implementation files?**
A: [module-redis-management.mdc](mdc:.cursor/rules/module-redis-management.mdc) - Complete file inventory

**Q: How does Planner sync work?**
A: [redis-tasks-keys-and-channels-microsoft-mcp.mdc](mdc:.cursor/rules/redis-tasks-keys-and-channels-microsoft-mcp.mdc) - MS-MCP patterns

**Q: How does System Two memory work?**
A: [redis-memory-sys-two.mdc](mdc:.cursor/rules/redis-memory-sys-two.mdc) - Memory patterns

---

## ğŸ“Š FILE STATISTICS

| File | Lines | Purpose | Audience |
|------|-------|---------|----------|
| redis-master-manager.mdc | 444 | Connection patterns | All developers |
| redis-component-keys-map.mdc | 1165 | Key reference | All developers |
| redis-json.mdc | 707 | JSON operations | Feature developers |
| module-redis-management.mdc | 84 | Architecture | System designers |
| redis-tasks-keys-and-channels-microsoft-mcp.mdc | 453 | MS-MCP patterns | Integration developers |
| redis-memory-sys-two.mdc | 646 | System Two memory | Memory system developers |
| redis-cli.mdc | 392 | CLI debugging | Operations/debugging |

---

## âœ… CONSISTENCY VERIFICATION

All files verified for consistency on **2025-09-30**:

- âœ… **Key patterns consistent** across all files
- âœ… **Connection patterns aligned** with redis-master-manager.mdc
- âœ… **Database strategy (DB 0, 1, 2)** documented
- âœ… **Namespace (annika:)** used consistently
- âœ… **Cross-links** properly updated
- âœ… **Authoritative storage** (`annika:tasks:{id}`) agreed upon
- âœ… **Tier hierarchy** clearly defined
- âœ… **File naming** follows lowercase-with-hyphens convention

---

## ğŸ”„ MAINTENANCE NOTES

**Last Updated**: 2025-09-30
**Version**: 1.0
**Next Review**: When new Redis patterns are added

**Update Checklist**:
- [ ] Verify cross-links work
- [ ] Check for new Redis patterns
- [ ] Validate consistency across files
- [ ] Update file statistics
- [ ] Test navigation flow
- [ ] Review common questions

---

## ğŸ“ QUICK LINKS

- **[Planner Sync Master](mdc:.cursor/rules/planner-sync-master.mdc)** - Overall Planner sync architecture
- **[System Architecture](mdc:.cursor/rules/system-architecture.mdc)** - Complete Annika 2.0 architecture
- **[Unified Annika Rules](mdc:.cursor/rules/unified-annika-rules.mdc)** - Master development rules

---

**Remember: When in doubt, start with [redis-master-manager.mdc](mdc:.cursor/rules/redis-master-manager.mdc) for connections and [redis-component-keys-map.mdc](mdc:.cursor/rules/redis-component-keys-map.mdc) for keys!**
